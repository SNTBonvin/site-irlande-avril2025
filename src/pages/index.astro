---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";

// Utilisation de l'API Intl pour formatter les dates en français
const articles = await getCollection("articles");
const formatDate = (dateStr) =>
  new Date(dateStr).toLocaleDateString("fr-FR", {
    day: "numeric",
    month: "long",
    year: "numeric",
  });
---

<Layout>
  <section class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    {articles.map((article) => (
      <a
        href={`/articles/${article.slug}/`}
        class="block bg-white dark:bg-gray-800 text-black dark:text-white rounded-xl shadow hover:shadow-lg transition overflow-hidden"
      >
        <img
          src={article.data.cover}
          alt={article.data.title}
          class="w-full h-48 object-cover rounded-t-xl transform hover:scale-105 transition-transform duration-300"
        />
        <div class="p-4">
          <h2 class="text-xl font-bold mb-1 text-[#169B62] dark:text-green-300">
            {article.data.title}
          </h2>
          <p class="text-sm text-gray-500 dark:text-gray-300">
            🗓️ {formatDate(article.data.pubDate)}
          </p>
        </div>
      </a>
    ))}
  </section>
</Layout>
